// İçerik betiğinden gelen mesajları dinle
chrome.runtime.onMessage.addListener(function(message, sender, sendResponse) {
  if (message && message.type === "logError" && message.error) {
    logError(message.error);
  }
});

// Hataları bir metin dosyasına kaydeden fonksiyon
function logError(errorText) {
  // Hataları Edge Extension Storage API kullanarak kaydet
  chrome.storage.local.get('json_errors', function(data) {
    let errors = data.json_errors || [];
    errors.push(errorText);
    chrome.storage.local.set({ 'json_errors': errors }, function() {
      console.log("Hata başarıyla kaydedildi: " + errorText);
    });
  });
}
